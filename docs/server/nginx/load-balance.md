---
nav:
  title: æœåŠ¡å™¨
  order: 2
group:
  title: Nginx
  order: 1
title: è´Ÿè½½å‡è¡¡
order: 8
---

# è´Ÿè½½å‡è¡¡

## GSLB

> GSLB æ˜¯è‹±æ–‡ Global Server Load Balance çš„ç¼©å†™ï¼Œæ„æ€æ˜¯å…¨å±€è´Ÿè½½å‡è¡¡ã€‚ä½œç”¨ï¼šå®ç°åœ¨å¹¿åŸŸç½‘ï¼ˆåŒ…æ‹¬äº’è”ç½‘ï¼‰ä¸Šä¸åŒåœ°åŸŸçš„æœåŠ¡å™¨é—´çš„æµé‡è°ƒé…ï¼Œä¿è¯ä½¿ç”¨æœ€ä½³çš„æœåŠ¡å™¨æœåŠ¡ç¦»è‡ªå·±æœ€è¿‘çš„å®¢æˆ·ï¼Œä»è€Œç¡®ä¿è®¿é—®è´¨é‡ã€‚

## SLB

> è´Ÿè½½å‡è¡¡ï¼ˆServer Load Balancerï¼Œç®€ç§° SLBï¼‰æ˜¯ä¸€ç§ç½‘ç»œè´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œé’ˆå¯¹é˜¿é‡Œäº‘å¼¹æ€§è®¡ç®—å¹³å°è€Œè®¾è®¡ï¼Œåœ¨ç³»ç»Ÿæ¶æ„ã€ç³»ç»Ÿå®‰å…¨åŠæ€§èƒ½ï¼Œæ‰©å±•ï¼Œå…¼å®¹æ€§è®¾è®¡ä¸Šéƒ½å……åˆ†è€ƒè™‘äº†å¼¹æ€§è®¡ç®—å¹³å°äº‘æœåŠ¡å™¨ä½¿ç”¨ç‰¹ç‚¹å’Œç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ã€‚

## å››å±‚è´Ÿè½½å‡è¡¡

## ä¸ƒå±‚è´Ÿè½½å‡è¡¡

é…ç½®è¯­æ³•ï¼š

```bash
syntax: upstream name{...}
default: -
context: http
```

ğŸŒ° **ç¤ºä¾‹ï¼š**

```nginx
upstream imooc {
    server 116.62.103.228:8001;
    server 116.62.103.228:8002;
    server 116.62.103.228:8003;
}

server {
    listen 80;
    server_name localhost jeson.t.imooc.io;

    #charset koi8-r
    access_log /var/log/nginx/test_proxy.access.log main;

    location / {
        proxy_pass http://imooc;
        include proxy_params;
    }

    # error_page 404 /404.html
}
```

**åç«¯æœåŠ¡å™¨åœ¨è´Ÿè½½å‡è¡¡è°ƒåº¦ä¸­çš„çŠ¶æ€**

| å­—æ®µ         | ä½œç”¨                                  |
| ------------ | ------------------------------------- |
| down         | å½“å‰çš„ Server æš‚æ—¶ä¸å‚ä¸è´Ÿè½½å‡è¡¡      |
| backup       | é¢„ç•™çš„å¤‡ä»½æœåŠ¡å™¨                      |
| max_fails    | å…è®¸è¯·æ±‚å¤±è´¥çš„æ¬¡æ•°                    |
| fail_timeout | ç»è¿‡ max_fails å¤±è´¥åï¼ŒæœåŠ¡æš‚åœçš„æ—¶é—´ |
| max_conns    | é™åˆ¶æœ€å¤§çš„æ¥æ”¶çš„è¿æ¥æ•°                |

## è°ƒåº¦ç®—æ³•

| å­—æ®µ        | ä½œç”¨                                                                         |
| ----------- | ---------------------------------------------------------------------------- |
| è½®è¯¢        | æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨                                         |
| åŠ æƒè½®è¯¢    | weight å€¼è¶Šå¤§ï¼Œåˆ†é…åˆ°çš„è®¿é—®å‡ ç‡è¶Šé«˜                                          |
| ip_hash     | æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—® ip çš„ hash ç»“æœåˆ†é…ï¼Œè¿™æ ·æ¥è‡ªåŒä¸ª ip çš„å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ |
| least_conn  | æœ€å°‘é“¾æ¥æ•°ï¼Œé‚£ä¸ªæœºå™¨è¿æ¥æ•°å°‘å°±åˆ†æ”¯                                           |
| url_hash    | æŒ‰ç…§è®¿é—®çš„ url çš„ hash ç»“æœæ¥åˆ†é…è¯·æ±‚ï¼Œæ˜¯æ¯ä¸ª url å®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨     |
| hash å…³é”®å€¼ | hash è‡ªå®šä¹‰çš„ key                                                            |


https://juejin.im/post/5e806d84e51d4546b659b370