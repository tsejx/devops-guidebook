<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/devops-guidebook/umi.css" />
    <script>
      window.routerBase = "/devops-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.9
    </script>
    <title>&#x57FA;&#x672C;&#x64CD;&#x4F5C;</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/data-base/mongodb/basic-usage" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/devops-icon.png&#x27;)" href="/devops-guidebook//">DevOps Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span><a href="/devops-guidebook//linux">Linux</a></span><span><a href="/devops-guidebook//server">æœåŠ¡å™¨</a></span><span><a aria-current="page" class="active" href="/devops-guidebook//data-base">æ•°æ®åº“</a></span><span><a href="/devops-guidebook//deploy">éƒ¨ç½²</a></span><span><a href="/devops-guidebook//code">ä»£ç ç®¡ç†</a></span><span><a href="/devops-guidebook//devops">DevOps</a></span><span><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/devops-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/devops-icon.png&#x27;)" href="/devops-guidebook//"></a><h1>DevOps Guidebook</h1><p>DevOps å®Œå…¨çŸ¥è¯†ä½“ç³»</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/devops-guidebook//linux">Linux</a></li><li><a href="/devops-guidebook//server">æœåŠ¡å™¨</a></li><li><a aria-current="page" class="active" href="/devops-guidebook//data-base">æ•°æ®åº“</a></li><li><a href="/devops-guidebook//deploy">éƒ¨ç½²</a></li><li><a href="/devops-guidebook//code">ä»£ç ç®¡ç†</a></li><li><a href="/devops-guidebook//devops">DevOps</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/devops-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/devops-guidebook//data-base">æ•°æ®åº“</a></li><li><a href="/devops-guidebook//data-base/no-sql">NoSQL</a></li><li><a aria-current="page" class="active" href="/devops-guidebook//data-base/mongodb">MongoDB</a><ul><li><a href="/devops-guidebook//data-base/mongodb/overview"><span>åŸºæœ¬æ¦‚è¿°</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/installment"><span>å®‰è£ä½¿ç”¨</span></a></li><li><a aria-current="page" class="active" href="/devops-guidebook//data-base/mongodb/basic-usage"><span>åŸºæœ¬æ“ä½œ</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/backup-and-recovery"><span>å¤‡ä»½ä¸æ¢å¤</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/aggregation"><span>èšåˆç®¡é“</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/indexes"><span>æ•°æ®åº“ç´¢å¼•</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/data-models"><span>æ•°æ®æ¨¡å‹</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/replication"><span>æ•°æ®åº“å‰¯æœ¬é›†</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/sharding"><span>æ•°æ®åº“åˆ†ç‰‡</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/administration"><span>æ•°æ®åº“ç®¡ç†</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/security"><span>æ•°æ®åº“å®‰å…¨</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/configuration"><span>é…ç½®æ–‡ä»¶</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/command"><span>å‘½ä»¤å¤§å…¨</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/mongodb"><span>æ‰©å±•èµ„æ–™</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/authentication"><span>é‰´æƒ</span></a></li><li><a href="/devops-guidebook//data-base/mongodb/shard-key"><span>ç‰‡é”®</span></a></li></ul></li><li><a href="/devops-guidebook//data-base/mysql">MySQL</a><ul><li><a href="/devops-guidebook//data-base/mysql/mysql"><span>MySQL</span></a></li><li><a href="/devops-guidebook//data-base/mysql/cluster"><span>é›†ç¾¤æ–¹æ¡ˆ</span></a></li></ul></li><li><a href="/devops-guidebook//data-base/radis">Radis</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="å¯åŠ¨æ•°æ®åº“" data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#å¯åŠ¨æ•°æ®åº“"><span>å¯åŠ¨æ•°æ®åº“</span></a></li><li title="è¿æ¥æ•°æ®åº“" data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#è¿æ¥æ•°æ®åº“"><span>è¿æ¥æ•°æ®åº“</span></a></li><li title="åˆ‡æ¢æ•°æ®åº“" data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#åˆ‡æ¢æ•°æ®åº“"><span>åˆ‡æ¢æ•°æ®åº“</span></a></li><li title="è·å–å¸®åŠ©ä¿¡æ¯" data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#è·å–å¸®åŠ©ä¿¡æ¯"><span>è·å–å¸®åŠ©ä¿¡æ¯</span></a></li><li title="åˆ é™¤æ•°æ®åº“" data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#åˆ é™¤æ•°æ®åº“"><span>åˆ é™¤æ•°æ®åº“</span></a></li><li title="æ•°æ®å¢åŠ " data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#æ•°æ®å¢åŠ "><span>æ•°æ®å¢åŠ </span></a></li><li title="æ•°æ®ä¿®æ”¹" data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#æ•°æ®ä¿®æ”¹"><span>æ•°æ®ä¿®æ”¹</span></a></li><li title="update" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#update"><span>update</span></a></li><li title="save" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#save"><span>save</span></a></li><li title="æ•°æ®æŸ¥è¯¢" data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#æ•°æ®æŸ¥è¯¢"><span>æ•°æ®æŸ¥è¯¢</span></a></li><li title="æ¡ä»¶æ“ä½œç¬¦" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#æ¡ä»¶æ“ä½œç¬¦"><span>æ¡ä»¶æ“ä½œç¬¦</span></a></li><li title="æ’åºå’Œåˆ†é¡µ" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#æ’åºå’Œåˆ†é¡µ"><span>æ’åºå’Œåˆ†é¡µ</span></a></li><li title="å¤åˆæ¡ä»¶æŸ¥è¯¢" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#å¤åˆæ¡ä»¶æŸ¥è¯¢"><span>å¤åˆæ¡ä»¶æŸ¥è¯¢</span></a></li><li title="åŒ…å«ä¸å…¨éƒ¨" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#åŒ…å«ä¸å…¨éƒ¨"><span>åŒ…å«ä¸å…¨éƒ¨</span></a></li><li title="åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨"><span>åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨</span></a></li><li title="ç©ºå€¼å¤„ç†" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#ç©ºå€¼å¤„ç†"><span>ç©ºå€¼å¤„ç†</span></a></li><li title="å–æ¨¡è¿ç®—" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#å–æ¨¡è¿ç®—"><span>å–æ¨¡è¿ç®—</span></a></li><li title="æ­£åˆ™åŒ¹é…" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#æ­£åˆ™åŒ¹é…"><span>æ­£åˆ™åŒ¹é…</span></a></li><li title="è·å–æŸ¥è¯¢ç»“æœæ•°é‡" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#è·å–æŸ¥è¯¢ç»“æœæ•°é‡"><span>è·å–æŸ¥è¯¢ç»“æœæ•°é‡</span></a></li><li title="distinct" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#distinct"><span>distinct</span></a></li><li title="æ•°æ®åˆ é™¤" data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#æ•°æ®åˆ é™¤"><span>æ•°æ®åˆ é™¤</span></a></li><li title="deleteOne å’Œ deleteMany" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#deleteone-å’Œ-deletemany"><span>deleteOne å’Œ deleteMany</span></a></li><li title="remove" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#remove"><span>remove</span></a></li><li title="ç´¢å¼•" data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#ç´¢å¼•"><span>ç´¢å¼•</span></a></li><li title="åˆ›å»ºç´¢å¼•" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#åˆ›å»ºç´¢å¼•"><span>åˆ›å»ºç´¢å¼•</span></a></li><li title="åˆ é™¤ç´¢å¼•" data-depth="3"><a href="/devops-guidebook//data-base/mongodb/basic-usage#åˆ é™¤ç´¢å¼•"><span>åˆ é™¤ç´¢å¼•</span></a></li><li title="å¯¼å‡ºæ•°æ®æ–‡ä»¶" data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#å¯¼å‡ºæ•°æ®æ–‡ä»¶"><span>å¯¼å‡ºæ•°æ®æ–‡ä»¶</span></a></li><li title="å¯¼å…¥æ•°æ®æ–‡ä»¶" data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#å¯¼å…¥æ•°æ®æ–‡ä»¶"><span>å¯¼å…¥æ•°æ®æ–‡ä»¶</span></a></li><li title="å‰¯æœ¬é›†" data-depth="2"><a href="/devops-guidebook//data-base/mongodb/basic-usage#å‰¯æœ¬é›†"><span>å‰¯æœ¬é›†</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="åŸºæœ¬æ“ä½œ"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#åŸºæœ¬æ“ä½œ"><span class="icon,icon-link"></span></a>åŸºæœ¬æ“ä½œ</h1><ul><li>å®‰è£… Install</li><li>åˆ›å»º Create</li><li>è¯»å– Read</li><li>æ›´æ–° Update</li><li>åˆ é™¤ Delete</li></ul><h2 id="å¯åŠ¨æ•°æ®åº“"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#å¯åŠ¨æ•°æ®åº“"><span class="icon,icon-link"></span></a>å¯åŠ¨æ•°æ®åº“</h2><p>å¯åŠ¨æ•°æ®åº“ä½¿ç”¨ <code>mongod</code> å‘½ä»¤ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># æ–¹å¼ä¸€ï¼šæ™®é€šæ–¹å¼å¯åŠ¨</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># ä¸å®ç”¨é»˜è®¤ç«¯å£çš„è¯å¯ä»¥åŠ ä¸Š --port=[ç«¯å£å·]å‚æ•°</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">mongod --dbpath ~/data/db</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># æ–¹å¼äºŒï¼šé€šè¿‡é…ç½®æ–‡ä»¶å¯åŠ¨</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">mongod --config ~/mongo.conf</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>é…ç½®æ–‡ä»¶å†…å®¹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># æœåŠ¡ç«¯å£</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token number">27017</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># æ•°æ®æ–‡ä»¶è·¯å¾„</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">dbpath</span><span class="token operator">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># æ—¥å¿—æ–‡ä»¶è·¯å¾„</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">logpath</span><span class="token operator">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># æ‰“å¼€æ—¥å¿—è¾“å‡ºæ“ä½œ</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">logappend</span><span class="token operator">=</span><span class="token plain">true</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># ä¸ä½¿ç”¨ä»»ä½•çš„éªŒè¯æ–¹å¼ç™»é™†</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token assign-left variable">noauth</span><span class="token operator">=</span><span class="token plain">true</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="è¿æ¥æ•°æ®åº“"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#è¿æ¥æ•°æ®åº“"><span class="icon,icon-link"></span></a>è¿æ¥æ•°æ®åº“</h2><p>è¿æ¥æ•°æ®åº“ä½¿ç”¨ <code>mongo [, é“¾æ¥å­—ç¬¦ä¸²]</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">mongodb</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token operator">&lt;</span><span class="token plain">username</span><span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token plain">password</span><span class="token operator">&gt;</span><span class="token plain">@</span><span class="token operator">&lt;</span><span class="token plain">host</span><span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token plain">port1</span><span class="token operator">&gt;</span><span class="token punctuation">,</span><span class="token operator">&lt;</span><span class="token plain">host2</span><span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token plain">port2</span><span class="token operator">&gt;</span><span class="token punctuation">,</span><span class="token spread operator">...</span><span class="token punctuation">,</span><span class="token operator">&lt;</span><span class="token plain">hostN</span><span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token plain">portN</span><span class="token operator">&gt;</span><span class="token operator">/</span><span class="token operator">&lt;</span><span class="token plain">database</span><span class="token operator">&gt;</span><span class="token operator">?</span><span class="token operator">&lt;</span><span class="token plain">options</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>ç™»é™†æœ¬åœ°é»˜è®¤æ•°æ®åº“æœåŠ¡å™¨ï¼Œæ— ç”¨æˆ·åå¯†ç ï¼Œç«¯å£é»˜è®¤ 27017ï¼Œé“¾æ¥é»˜è®¤çš„ db æ•°æ®åº“ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># è¿æ¥æ•°æ®åº“</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">mongo mongodb://localhost/db</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>ğŸŒ° <strong>ç¤ºä¾‹ï¼š</strong></p><p>æˆ–ï¼Œä½¿ç”¨ç”¨æˆ·å adminã€å¯†ç  123456ï¼Œç™»é™†æœ¬åœ°ç«¯å£ä¸º 27017 çš„ test æ•°æ®åº“ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># å®æˆ˜ç¤ºä¾‹</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">mongo mongodb://admin:123456@localhost:27017/test</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><strong>ä»¥ä¸‹ä»£ç å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿æ¥åˆ°æœ¬åœ° Docker å®¹å™¨ä¸Šè¿è¡Œçš„ mongod è¿›ç¨‹</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> mongoose </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;mongoose&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> mongoDB </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;mongodb://localhost:27017/demo&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">mongoose</span><span class="token punctuation">.</span><span class="token method function property-access">conncet</span><span class="token punctuation">(</span><span class="token plain">mongoDB</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain">useNewUrlParser</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> db</span><span class="token punctuation">.</span><span class="token property-access">mongoose</span><span class="token punctuation">.</span><span class="token property-access">connection</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db</span><span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">&#x27;error&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span><span class="token plain">console</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;MongoDBè¿æ¥å¼‚å¸¸&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="åˆ‡æ¢æ•°æ®åº“"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#åˆ‡æ¢æ•°æ®åº“"><span class="icon,icon-link"></span></a>åˆ‡æ¢æ•°æ®åº“</h2><p>åˆ‡æ¢æ•°æ®åº“ç”¨ <code>use &lt;db_name&gt;</code>ï¼Œå¦‚æœè¯¥æ•°æ®åº“ä¸å­˜åœ¨ï¼Œåˆ™ä¼šæ–°å»ºä¸€ä¸ªæ•°æ®åº“ã€‚</p><p>ğŸŒ° <strong>ç¤ºä¾‹ï¼š</strong></p><p>ä¾‹å¦‚åˆ›å»ºä¸€ä¸ª test çš„æ•°æ®åº“ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># åˆ‡æ¢æ•°æ®åº“</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">use </span><span class="token operator">&lt;</span><span class="token plain">db_name</span><span class="token operator">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># æŸ¥çœ‹å½“å‰æ‰€åœ¨æ•°æ®åº“</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><code>&lt;db_name&gt;</code> ä¸ºæ•°æ®åº“åç§°ã€‚</p><p>æ˜¾ç¤ºå½“å‰æ‰€æœ‰çš„æ•°æ®åº“å¯ä»¥ä½¿ç”¨å‘½ä»¤ <code>show dbs</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># æŸ¥çœ‹å…¨éƒ¨æ•°æ®åº“</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">show dbs</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„é›†åˆï¼ˆç±»ä¼¼å…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ï¼‰</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">show collections</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># æŸ¥çœ‹å½“å‰æ•°æ®çš„ç”¨æˆ·ä¿¡æ¯</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">show </span><span class="token function">users</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>æŸ¥çœ‹ <code>db.[é›†åˆåç§°].find()</code> åˆšæ‰æ·»åŠ çš„æ•°æ®ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token operator">&gt;</span><span class="token plain"> use </span><span class="token builtin class-name">test</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">switched to db </span><span class="token builtin class-name">test</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> db.coll.</span><span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token string">&quot;_id&quot;</span><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain"> ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5a66e39914fea5f8ff237420&quot;</span><span class="token punctuation">)</span><span class="token plain">, </span><span class="token string">&quot;title&quot;</span><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string">&quot;not data!&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>ä½¿ç”¨ <code>use</code> å‘½ä»¤å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå­˜åœ¨åˆ™åˆ‡æ¢åˆ°æŒ‡å®šçš„æ•°æ®åº“ã€‚</p><h2 id="è·å–å¸®åŠ©ä¿¡æ¯"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#è·å–å¸®åŠ©ä¿¡æ¯"><span class="icon,icon-link"></span></a>è·å–å¸®åŠ©ä¿¡æ¯</h2><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># æ˜¾ç¤ºæ•°æ®åº“æ“ä½œå‘½ä»¤</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.help</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># æ˜¾ç¤ºé›†åˆæ“ä½œå‘½ä»¤ï¼ŒåŒæ ·æœ‰å¾ˆå¤šå‘½ä»¤</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># foo æŒ‡å½“å‰æ•°æ®åº“ä¸‹ï¼Œä¸€ä¸ªå« foo çš„é›†åˆï¼Œå¹¶éçœŸæ­£æ„ä¹‰ä¸Šçš„å‘½ä»¤</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.foo.help</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="åˆ é™¤æ•°æ®åº“"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#åˆ é™¤æ•°æ®åº“"><span class="icon,icon-link"></span></a>åˆ é™¤æ•°æ®åº“</h2><p>åˆ é™¤æ•°æ®åº“ä½¿ç”¨ <code>db.dropDataBase()</code> å‡½æ•°è¿›è¡Œã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> show dbs</span></div><div class="token-line"><span class="token plain">db    </span><span class="token number">0</span><span class="token plain">.001GB</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain">.000GB</span></div><div class="token-line"><span class="token plain"></span><span class="token builtin class-name">test</span><span class="token plain">  </span><span class="token number">0</span><span class="token plain">.000GB</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># åˆ‡æ¢åˆ°è¦åˆ é™¤çš„æ•°æ®åº“ test</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> use </span><span class="token builtin class-name">test</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">switched to db </span><span class="token builtin class-name">test</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># åˆ é™¤å½“å‰æ•°æ®åº“</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> db.</span><span class="token function-name function">dropDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token string">&quot;dropped&quot;</span><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string">&quot;test123&quot;</span><span class="token plain">, </span><span class="token string">&quot;ok&quot;</span><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token comment"># åˆ é™¤æˆåŠŸ</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="æ•°æ®å¢åŠ "><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#æ•°æ®å¢åŠ "><span class="icon,icon-link"></span></a>æ•°æ®å¢åŠ </h2><p>æ•°æ®æ·»åŠ æ–¹æ³•ï¼š</p><ul><li><code>insert()</code></li><li><code>insertOne()</code></li><li><code>insertMany()</code></li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># insert æ’å…¥ä¸€æ¡æ•°æ®</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token string">&quot;Ben&quot;</span><span class="token plain">, sex: </span><span class="token string">&quot;male&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># insert ä¹Ÿå¯ä»¥æ’å…¥å¤šæ¡æ•°æ®</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token string">&quot;Ben&quot;</span><span class="token plain">, sex: </span><span class="token string">&quot;male&quot;</span><span class="token punctuation">}</span><span class="token plain">, </span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token string">&quot;Amy&quot;</span><span class="token plain">, sex: </span><span class="token string">&quot;female&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># insertOne åªèƒ½æ’å…¥ä¸€æ¡æ•°æ®</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token string">&quot;Ben&quot;</span><span class="token plain">, sex: </span><span class="token string">&quot;male&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># insertMany å¯ä»¥æ’å…¥ä¸€æ¡æˆ–å¤šæ¡æ•°æ®ï¼Œä½†æ˜¯å¿…é¡»ä»¥åˆ—è¡¨çš„å½¢å¼ç»„ç»‡æ•°æ®</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token string">&quot;Ben&quot;</span><span class="token plain">, sex: </span><span class="token string">&quot;male&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># å¦‚æœä¸æŒ‡å®š _idï¼Œsave çš„åŠŸèƒ½ä¸ insert ä¸€æ ·</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.save</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token string">&quot;Ben&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain">, </span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token string">&quot;Amy&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># å¦‚æœæŒ‡å®š _idï¼Œmongodb å°±ä¸ä¸ºè¯¥æ¡è®°å½•è‡ªåŠ¨ç”Ÿæˆ _id äº†ï¼Œåªæœ‰ save å¯ä»¥æŒ‡å®š _idï¼Œinsertã€insertOneã€insertMany éƒ½ä¸å¯ä»¥</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.save</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> _id: ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;...&quot;</span><span class="token punctuation">)</span><span class="token plain">, name: </span><span class="token string">&quot;Ben&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="æ•°æ®ä¿®æ”¹"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#æ•°æ®ä¿®æ”¹"><span class="icon,icon-link"></span></a>æ•°æ®ä¿®æ”¹</h2><h3 id="update"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#update"><span class="icon,icon-link"></span></a>update</h3><p>ä¿®æ”¹æ–¹æ³•ï¼š<code>update()</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.update</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">query</span><span class="token operator">&gt;</span><span class="token plain">, </span><span class="token comment"># update çš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼äº sql update è¯­å¥ where åé¢éƒ¨åˆ†</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">update</span><span class="token operator">&gt;</span><span class="token plain">, </span><span class="token comment"># update çš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸º sql update è¯­å¥ set åé¢çš„éƒ¨åˆ†</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    upsert: </span><span class="token operator">&lt;</span><span class="token plain">boolean</span><span class="token operator">&gt;</span><span class="token plain">, </span><span class="token comment"># å¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å­˜åœ¨ update çš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥ objNewï¼Œtrue ä¸ºæ’å…¥ï¼Œé»˜è®¤ falseï¼Œä¸æ’å…¥</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    multi: </span><span class="token operator">&lt;</span><span class="token plain">boolean</span><span class="token operator">&gt;</span><span class="token plain">, </span><span class="token comment"># å¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯ falseï¼Œåªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸º trueï¼Œå°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    writeConcern: </span><span class="token operator">&lt;</span><span class="token plain">document</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token comment"># å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>Ben åŒå­¦å‘ç°è€æ˜¯æŠŠå¥¹çš„ C++ è¯¾ç¨‹åˆ†æ•°å½•é”™äº†ï¼Œéœ€è¦ä¿®æ”¹ä¸º 75 åˆ†ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> _id: ObjectId</span><span class="token punctuation">(</span><span class="token string">&#x27;...&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain">, </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token variable">$set</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> score: </span><span class="token number">75</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>è€å¸ˆå‘ç°æŠŠ Ben åŒå­¦çš„åå­—å½•é”™äº†ï¼Œéœ€è¦å…¨éƒ¨ä¿®æ”¹è¿‡æ¥ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># è¿™æ ·æ˜¯ä¸å¯¹çš„ï¼Œåªä¼šä¿®æ”¹ä¸€æ¡è®°å½•</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> _id: ObjectId</span><span class="token punctuation">(</span><span class="token string">&#x27;...&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain">, </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token variable">$set</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> score: </span><span class="token number">75</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># è¿™æ ·æ‰å¯¹</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token string">&#x27;Ben&#x27;</span><span class="token plain">, class: </span><span class="token string">&#x27;Java&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain">, </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token variable">$set</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> score: </span><span class="token number">95</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain">, </span><span class="token punctuation">{</span><span class="token plain"> multi: </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>å°† Ben çš„ Java è¯¾ç¨‹åˆ†æ•°æ”¹ä¸º 95 åˆ†ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±æ’å…¥ä¸€æ¡è®°å½•ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token string">&#x27;Ben&#x27;</span><span class="token plain">, class: </span><span class="token string">&#x27;Java&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain">, </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token variable">$set</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> score: </span><span class="token number">95</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain">, </span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="save"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#save"><span class="icon,icon-link"></span></a>save</h3><p>save æ–¹æ³•é€šè¿‡ä¼ å…¥çš„æ–‡æ¡£æ¥æ›¿æ¢å·²æœ‰æ–‡æ¡£ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.save</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">document</span><span class="token operator">&gt;</span><span class="token plain">, </span><span class="token comment"># æ–‡æ¡£æ•°æ®</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    writeConcern: </span><span class="token operator">&lt;</span><span class="token plain">document</span><span class="token operator">&gt;</span><span class="token plain">, </span><span class="token comment"># å¯æŠ›ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸çº§åˆ«</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="æ•°æ®æŸ¥è¯¢"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#æ•°æ®æŸ¥è¯¢"><span class="icon,icon-link"></span></a>æ•°æ®æŸ¥è¯¢</h2><p>æ•°æ®æŸ¥è¯¢çš„æ–¹æ³•æœ‰ <code>findOne</code> å’Œ <code>find</code>ï¼ŒäºŒè€…å‚æ•°ç­‰ç”¨æ³•ä¸€è‡´ï¼Œä½†æ˜¯ <code>findOne</code> åªè¿”å›ä¸€æ¡åŒ¹é…çš„æ•°æ®ï¼Œ<code>find</code> è¿”å›å…¨éƒ¨çš„åŒ¹é…æ•°æ®ã€‚</p><h3 id="æ¡ä»¶æ“ä½œç¬¦"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#æ¡ä»¶æ“ä½œç¬¦"><span class="icon,icon-link"></span></a>æ¡ä»¶æ“ä½œç¬¦</h3><table><thead><tr><th>æ“ä½œ</th><th>SQL æŸ¥è¯¢å†™æ³•</th><th>MongoDB æŸ¥è¯¢å†™æ³•</th></tr></thead><tbody><tr><td>ç­‰äº</td><td><code>select * from collection where score = 75</code></td><td><code>db.collection.find(<!-- -->{<!-- --> score: 75<!-- -->}<!-- -->)</code></td></tr><tr><td>å°äº</td><td><code>select * from collection where score &lt; 75</code></td><td><code>db.collection.find(<!-- -->{<!-- --> score: <!-- -->{<!-- --> $lt: 75<!-- -->}<!-- -->}<!-- -->)</code></td></tr><tr><td>å°äºç­‰äº</td><td><code>select * from collection where score = 75</code></td><td><code>db.collection.find(<!-- -->{<!-- --> score: <!-- -->{<!-- --> $lte: 75<!-- -->}<!-- -->}<!-- -->)</code></td></tr><tr><td>å¤§äº</td><td><code>select * from collection where score &gt; 75</code></td><td><code>db.collection.find(<!-- -->{<!-- --> score: <!-- -->{<!-- --> $gt: 75<!-- -->}<!-- -->}<!-- -->)</code></td></tr><tr><td>å¤§äºç­‰äº</td><td><code>select * from collection where score &gt;= 75</code></td><td><code>db.collection.find(<!-- -->{<!-- --> score: <!-- -->{<!-- --> $gte: 75<!-- -->}<!-- -->}<!-- -->)</code></td></tr><tr><td>ä¸ç­‰äº</td><td><code>select * from collection where score != 75</code></td><td><code>db.collection.find(<!-- -->{<!-- --> score: <!-- -->{<!-- --> $ne: 75<!-- -->}<!-- -->}<!-- -->)</code></td></tr></tbody></table><h3 id="æ’åºå’Œåˆ†é¡µ"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#æ’åºå’Œåˆ†é¡µ"><span class="icon,icon-link"></span></a>æ’åºå’Œåˆ†é¡µ</h3><p>ä»¥åˆ†æ•°ä»é«˜åˆ°ä½æ˜¾ç¤ºå­¦ç”Ÿçš„ C++ è¯¾ç¨‹æˆç»©ï¼Œåªæ˜¾ç¤ºç¬¬ 10 ååˆ°ç¬¬ 20 åçš„å­¦ç”Ÿï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> class: </span><span class="token string">&#x27;C++&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain">.sort</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> score: -1 </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain">.skip</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token plain">.limit</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># sort: 1 ä¸ºå‡åº, -1 ä¸ºé™åº, é»˜è®¤å‡åº</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># limit: æ˜¾ç¤ºå¤šå°‘æ¡æ•°æ®</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># skip: è·³è¿‡å¤šå°‘æ¡æ•°æ®</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="å¤åˆæ¡ä»¶æŸ¥è¯¢"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#å¤åˆæ¡ä»¶æŸ¥è¯¢"><span class="icon,icon-link"></span></a>å¤åˆæ¡ä»¶æŸ¥è¯¢</h3><p><code>and</code>ï¼š<code>find</code> æ–¹æ³•å¯ä»¥ä¼ å…¥å¤šä¸ªé”®å€¼å¯¹ï¼Œæ¯ä¸ªé”®å€¼å¯¹ä»¥é€—å·éš”å¼€ï¼Œå³å¸¸è§„ SQL çš„ AND æ¡ä»¶ã€‚</p><p>æŸ¥è¯¢ Ben åŒå­¦çš„ C++ è¯¾ç¨‹æˆç»©ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db</span><span class="token punctuation">.</span><span class="token plain">collection</span><span class="token punctuation">.</span><span class="token plain">find</span><span class="token punctuation">(</span><span class="token plain">{ name: </span><span class="token string">&#x27;Ben&#x27;</span><span class="token punctuation">,</span><span class="token plain"> class: </span><span class="token string">&#x27;C++&#x27;</span><span class="token plain"> }</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>æŸ¥è¯¢åˆ†æ•°åœ¨ 75 åˆ° 85 ä¹‹é—´çš„æˆç»©è®°å½•ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db</span><span class="token punctuation">.</span><span class="token plain">collection</span><span class="token punctuation">.</span><span class="token plain">find</span><span class="token punctuation">(</span><span class="token plain">{ socre: { $gt: </span><span class="token number">75</span><span class="token punctuation">,</span><span class="token plain"> $lt: </span><span class="token number">85</span><span class="token plain"> }}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><code>or</code>ï¼šMongoDB OR æ¡ä»¶è¯­å¥ä½¿ç”¨äº†å…³é”®å­— <code>$or</code>ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db</span><span class="token punctuation">.</span><span class="token plain">collection</span><span class="token punctuation">.</span><span class="token plain">find</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  {</span></div><div class="token-line"><span class="token plain">    $</span><span class="token operator">or</span><span class="token plain">: </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      { key1: value1 }</span><span class="token punctuation">,</span><span class="token plain"> { key2: value2 }</span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  }</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>æŸ¥è¯¢ Ben æˆ– Jack çš„è¯¾ç¨‹æˆç»©ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db</span><span class="token punctuation">.</span><span class="token plain">collection</span><span class="token punctuation">.</span><span class="token plain">find</span><span class="token punctuation">(</span><span class="token plain">{ $</span><span class="token operator">or</span><span class="token plain">: </span><span class="token punctuation">[</span><span class="token plain">{ name: </span><span class="token string">&#x27;Ben&#x27;</span><span class="token plain"> }</span><span class="token punctuation">,</span><span class="token plain"> { name: </span><span class="token string">&#x27;Jack&#x27;</span><span class="token plain"> }</span><span class="token punctuation">]</span><span class="token plain"> }</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><code>and</code> å’Œ <code>or</code> å¤åˆæŸ¥è¯¢ï¼š</p><p>æŸ¥è¯¢ Ben çš„ C++ æˆ– Python è¯¾ç¨‹çš„æˆç»©ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db</span><span class="token punctuation">.</span><span class="token plain">collection</span><span class="token punctuation">.</span><span class="token plain">find</span><span class="token punctuation">(</span><span class="token plain">{ name: </span><span class="token string">&#x27;Ben&#x27;</span><span class="token punctuation">,</span><span class="token plain"> $</span><span class="token operator">or</span><span class="token plain">: </span><span class="token punctuation">[</span><span class="token plain">{ class: </span><span class="token string">&#x27;C++&#x27;</span><span class="token plain"> }</span><span class="token punctuation">,</span><span class="token plain"> { class: </span><span class="token string">&#x27;Python&#x27;</span><span class="token plain"> }</span><span class="token punctuation">]</span><span class="token plain">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="åŒ…å«ä¸å…¨éƒ¨"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#åŒ…å«ä¸å…¨éƒ¨"><span class="icon,icon-link"></span></a>åŒ…å«ä¸å…¨éƒ¨</h3><ul><li>åŒ…å« <code>in</code></li><li>ä¸åŒ…å« <code>nin</code></li><li>å…¨éƒ¨ <code>all</code></li></ul><p>æŸ¥è¯¢ Benã€Jack å’Œ Amy çš„æˆç»©ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db</span><span class="token punctuation">.</span><span class="token plain">collection</span><span class="token punctuation">.</span><span class="token plain">find</span><span class="token punctuation">(</span><span class="token plain">{ name: { $</span><span class="token operator">in</span><span class="token plain">: </span><span class="token punctuation">[</span><span class="token string">&#x27;Ben&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;Jack&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;Amy&#x27;</span><span class="token punctuation">]</span><span class="token plain"> } }</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>æŸ¥è¯¢é™¤äº† Benã€Jack å’Œ Amy ä¹‹å¤–ï¼Œå…¶ä»–äººçš„æˆç»©ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-sql"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db</span><span class="token punctuation">.</span><span class="token plain">collection</span><span class="token punctuation">.</span><span class="token plain">find</span><span class="token punctuation">(</span><span class="token plain">{ name: { $nin: </span><span class="token punctuation">[</span><span class="token string">&#x27;Ben&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;Jack&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;Amy&#x27;</span><span class="token punctuation">]</span><span class="token plain"> }</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><code>in</code> å’Œ <code>nin</code> æ¯”è¾ƒå¥½ç†è§£ï¼Œè·Ÿ SQL çš„ç”¨æ³•ç±»ä¼¼ï¼Œ<code>all</code> ç±»ä¼¼äº <code>in</code>ï¼Œä¸åŒçš„åœ°æ–¹æ˜¯ï¼Œ<code>in</code> åªéœ€è¦æ»¡è¶³åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå€¼å³å¯ï¼Œè€Œ <code>all</code> éœ€è¦æ»¡è¶³åˆ—è¡¨ä¸­çš„å…¨éƒ¨å€¼ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># ç”¨ all æ“ä½œç¬¦ï¼Œè¡¨ç¤ºéœ€è¦æ»¡è¶³ C++ å’Œ Java ä¸¤é¡¹</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> course: </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token variable">$all</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;C++&#x27;</span><span class="token plain">, </span><span class="token string">&#x27;Java&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨"><span class="icon,icon-link"></span></a>åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨</h3><p>éœ€è¦æ‰¾å‡ºæ²¡æœ‰ <code>tel</code> å­—æ®µçš„å­¦ç”Ÿï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># å­—æ®µä¸å­˜åœ¨å°±ç”¨falseï¼Œå­˜åœ¨å°±ç”¨true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;tel&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token variable">$exists</span><span class="token builtin class-name">:</span><span class="token plain"> false</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="ç©ºå€¼å¤„ç†"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#ç©ºå€¼å¤„ç†"><span class="icon,icon-link"></span></a>ç©ºå€¼å¤„ç†</h3><p>å¦‚æœåªæƒ³æ‰¾ <code>tel</code> å€¼ä¸º <code>null</code> çš„æƒ…å†µï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> tel: </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token variable">$in</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">null</span><span class="token punctuation">]</span><span class="token plain">, </span><span class="token variable">$exists</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="å–æ¨¡è¿ç®—"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#å–æ¨¡è¿ç®—"><span class="icon,icon-link"></span></a>å–æ¨¡è¿ç®—</h3><p>æ¯”å¦‚ï¼ŒæŸ¥æ‰¾å­¦ç”Ÿæˆç»©å–æ¨¡ 10 ç­‰äº 0 çš„æ•°æ®ï¼ˆå³ 100ã€90 ã€80 ç­‰ç­‰ï¼‰</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> tel: </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token variable">$in</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">null</span><span class="token punctuation">]</span><span class="token plain">, </span><span class="token variable">$exists</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="æ­£åˆ™åŒ¹é…"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#æ­£åˆ™åŒ¹é…"><span class="icon,icon-link"></span></a>æ­£åˆ™åŒ¹é…</h3><p>æŸ¥è¯¢å­¦ç”Ÿåå­—ä»¥ <code>a</code> å¼€å¤´çš„å­¦ç”Ÿæˆç»©ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token variable">$regex</span><span class="token builtin class-name">:</span><span class="token plain"> /^a.*/ </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="è·å–æŸ¥è¯¢ç»“æœæ•°é‡"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#è·å–æŸ¥è¯¢ç»“æœæ•°é‡"><span class="icon,icon-link"></span></a>è·å–æŸ¥è¯¢ç»“æœæ•°é‡</h3><p>æŸ¥è¯¢å­¦ç”Ÿåå­—ä»¥ <code>a</code> å¼€å¤´çš„å­¦ç”Ÿæˆç»©ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain">.count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>å½“ä½¿ç”¨ <code>limit</code> æ–¹æ³•é™åˆ¶è¿”å›çš„è®°å½•æ•°æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ <code>count</code> æ–¹æ³•ä»ç„¶è¿”å›å…¨éƒ¨è®°å½•æ¡æ•°ã€‚å¦‚æœå¸Œæœ›è¿”å›é™åˆ¶ä¹‹åçš„è®°å½•æ•°é‡ï¼Œè¦ä½¿ç”¨ <code>count(true)</code>ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain">.count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain">.limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain">.count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain">.limit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain">.count</span><span class="token punctuation">(</span><span class="token plain">true</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="distinct"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#distinct"><span class="icon,icon-link"></span></a>distinct</h3><p>æŸ¥è¯¢è¯¾ç¨‹æˆç»©è¡¨ä¸­æ‰€æœ‰å­¦ç”Ÿçš„åå•ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.distinct</span><span class="token punctuation">(</span><span class="token string">&#x27;name&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="æ•°æ®åˆ é™¤"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#æ•°æ®åˆ é™¤"><span class="icon,icon-link"></span></a>æ•°æ®åˆ é™¤</h2><h3 id="deleteone-å’Œ-deletemany"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#deleteone-å’Œ-deletemany"><span class="icon,icon-link"></span></a>deleteOne å’Œ deleteMany</h3><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># åˆ é™¤ Ben çš„ä¸€æ¡æˆç»©è®°å½•</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.deleteOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token string">&#x27;Ben&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># åˆ é™¤ Ben çš„æ‰€æœ‰æˆç»©è®°å½•</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token string">&#x27;Ben&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># åˆ é™¤æˆç»©è¡¨é‡Œæ‰€æœ‰å†…å®¹</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.collection.deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="remove"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#remove"><span class="icon,icon-link"></span></a>remove</h3><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.remove</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">query</span><span class="token operator">&gt;</span><span class="token plain">, </span><span class="token comment"># å¯é€‰ï¼ŒæŸ¥è¯¢æ¡ä»¶</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    justOne: </span><span class="token operator">&lt;</span><span class="token plain">boolean</span><span class="token operator">&gt;</span><span class="token plain">, </span><span class="token comment"># å¯é€‰ï¼Œè®¾ç½®ä¸º true æˆ–è€… 1ï¼Œè¡¨ç¤ºåªåˆ é™¤ä¸€ä¸ªæ–‡æ¡£ï¼Œè®¾ç½®ä¸º falseï¼Œè¡¨ç¤ºåˆ é™¤æ‰€æœ‰åŒ¹é…çš„æ–‡æ¡£ï¼Œé»˜è®¤ä¸º false</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    writeConcern: </span><span class="token operator">&lt;</span><span class="token plain">document</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token comment"># å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>åˆ é™¤ Ben çš„æ‰€æœ‰æˆç»©è®°å½•ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">db.collection.remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> name: </span><span class="token string">&#x27;Ben&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># remove æ–¹æ³•å¹¶ä¸ä¼šçœŸæ­£é‡Šæ”¾ç©ºé—´ï¼Œéœ€è¦ç»§ç»­æ‰§è¡Œ db.repairDatabase() æ¥å›æ”¶ç£ç›˜ç©ºé—´</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.repairDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># ä¸ä¸Šä¸€å¥ç­‰æ•ˆï¼Œä»ä»¥æ‰§è¡Œä¸€å¥å³å¯</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.runCommand</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> repairDatabase: </span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><code>remove</code> ç°åœ¨å·²ç»è¿‡æ—¶äº†ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ <code>deleteOne</code> å’Œ <code>deleteMany</code> æ–¹æ³•ã€‚</p><h2 id="ç´¢å¼•"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#ç´¢å¼•"><span class="icon,icon-link"></span></a>ç´¢å¼•</h2><p>ç´¢å¼•é€šå¸¸èƒ½å¤Ÿæå¤§çš„æé«˜æŸ¥è¯¢çš„æ•ˆç‡ï¼Œå°±åƒä¹¦çš„ç›®å½•ä¸€æ ·ï¼Œå¦‚æœæ²¡æœ‰ç´¢å¼• mongodb å°±ä¼šå»æ‰«æé›†åˆä¸­çš„æ¯ä¸ªæ–‡ä»¶å¹¶é€‰å–ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„æ•°æ®ï¼Œåœ¨æ•°æ®é‡å¤§çš„æ—¶å€™è¿™ç§æŸ¥è¯¢ç›¸ç‡å¾ˆä½ä¸‹ã€‚</p><p>ä½¿ç”¨ <code>db.é›†åˆåç§°.getIndexed()</code> è·å–é›†åˆç´¢å¼•ã€‚</p><h3 id="åˆ›å»ºç´¢å¼•"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#åˆ›å»ºç´¢å¼•"><span class="icon,icon-link"></span></a>åˆ›å»ºç´¢å¼•</h3><p>åˆ›å»ºç´¢å¼•çš„æ–¹æ³•ï¼š<code>createIndex()</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># åœ¨ person é›†åˆä¸­é’ˆå¯¹ name å­—æ®µåˆ›å»ºä¸€ä¸ªå‡åºæ’åˆ—çš„ç´¢å¼•</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.person.createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.person.getIndexes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;v&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string">&quot;_id&quot;</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;ns&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string">&quot;test.person&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;v&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string">&quot;name_1&quot;</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;ns&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string">&quot;test.person&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="åˆ é™¤ç´¢å¼•"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#åˆ é™¤ç´¢å¼•"><span class="icon,icon-link"></span></a>åˆ é™¤ç´¢å¼•</h3><p>åˆ é™¤ç´¢å¼•çš„æ–¹æ³•ï¼š<code>dropIndex()</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># åˆ é™¤æŒ‡å®šç´¢å¼•</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.person.dropIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token string">&quot;nIndexesWas&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">, </span><span class="token string">&quot;ok&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.person.getIndexes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;v&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string">&quot;_id&quot;</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;ns&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string">&quot;test.person&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># åˆ é™¤å…¨éƒ¨ç´¢å¼•</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">db.person.dropIndexes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="å¯¼å‡ºæ•°æ®æ–‡ä»¶"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#å¯¼å‡ºæ•°æ®æ–‡ä»¶"><span class="icon,icon-link"></span></a>å¯¼å‡ºæ•°æ®æ–‡ä»¶</h2><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">mongodump -h IP --port ç«¯å£ -u ç”¨æˆ·å -p å¯†ç  -d æ•°æ®åº“ -o æ–‡ä»¶å­˜åœ¨è·¯å¾„</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><ul><li>å¦‚æœæ²¡æœ‰ç”¨æˆ·è°ï¼Œå¯ä»¥å»æ‰ <code>-u</code> å’Œ <code>-p</code>ã€‚</li><li>å¦‚æœå¯¼å‡ºæœ¬æœºçš„æ•°æ®åº“ï¼Œå¯ä»¥å»æ‰ <code>-h</code>ã€‚</li><li>å¦‚æœæ˜¯é»˜è®¤ç«¯å£ï¼Œå¯ä»¥å»æ‰ <code>--port</code>ã€‚</li><li>å¦‚æœæƒ³å¯¼å‡ºæ‰€æœ‰æ•°æ®åº“ï¼Œå¯ä»¥å»æ‰ <code>-d</code>ã€‚</li></ul><h2 id="å¯¼å…¥æ•°æ®æ–‡ä»¶"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#å¯¼å…¥æ•°æ®æ–‡ä»¶"><span class="icon,icon-link"></span></a>å¯¼å…¥æ•°æ®æ–‡ä»¶</h2><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">mongorestore -h IP --port ç«¯å£ -u ç”¨æˆ·å -p å¯†ç  -d æ•°æ®åº“ --drop</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><code>--drop</code> çš„æ„æ€æ˜¯ï¼Œå…ˆåˆ é™¤æ‰€æœ‰çš„è®°å½•ï¼Œç„¶åæ¢å¤</p><h2 id="å‰¯æœ¬é›†"><a aria-hidden="true" tabindex="-1" href="/devops-guidebook//data-base/mongodb/basic-usage#å‰¯æœ¬é›†"><span class="icon,icon-link"></span></a>å‰¯æœ¬é›†</h2><p>ä½¿ç”¨ Docker åˆ›å»º MongoDB å‰¯æœ¬é›†</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># åˆ›å»º Docker Network</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ docker network create mynetwork</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ docker network </span><span class="token function">ls</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>åˆ›å»ºéœ€è¦ä½¿ç”¨çš„å¤åˆ¶é›†èŠ‚ç‚¹</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># è¿è¡Œä¸‰ä¸ª Docker å®¹å™¨ï¼Œæ¯ä¸ªå®¹æ˜“ä¸€ä¸ª mongod èŠ‚ç‚¹</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ docker run --net mynetwork --name mongol -v /mymongo/data1:/data/db -p </span><span class="token number">27017</span><span class="token plain">:27017 -d mongo:4 --replSet myset --port </span><span class="token number">27017</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ docker run --net mynetwork --name mongo2 -v /mymongo/data2:/data/db -p </span><span class="token number">27018</span><span class="token plain">:27018 -d mongo:4 --replSet myset --port </span><span class="token number">27018</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ docker run --net mynetwork --name mongo3 -v /mymongo/data3:/data/db -p </span><span class="token number">27019</span><span class="token plain">:27019 -d mongo:4 --replSet myset --port </span><span class="token number">27019</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>åˆ›å»ºå¤åˆ¶é›†</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># åˆ›å»ºä¸€ä¸ªæ‹¥æœ‰ä¸‰ä¸ªèŠ‚ç‚¹çš„å¤åˆ¶é›†</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ docker </span><span class="token builtin class-name">exec</span><span class="token plain"> -it mongo1 mongo</span></div><div class="token-line"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> rs.initiate</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    _id: </span><span class="token string">&quot;myset&quot;</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">    members: </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    	</span><span class="token comment"># mongo1 æ˜¯ docker å®¹å™¨åç§°ï¼Œ27017 æ˜¯ docker æš´éœ²å®¿ä¸»æœºçš„ç«¯å£</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"> _id: </span><span class="token number">0</span><span class="token plain">, host: </span><span class="token string">&quot;mongo1:27017&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"> _id: </span><span class="token number">1</span><span class="token plain">, host: </span><span class="token string">&quot;mongo2:27018&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain">,</span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"> _id: </span><span class="token number">2</span><span class="token plain">, host: </span><span class="token string">&quot;mongo3:27019&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>æŸ¥çœ‹å¤åˆ¶é›†çŠ¶æ€</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">$ rs.status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><hr/><p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://blog.csdn.net/weixin_34095889/article/details/89046540">MongoDB å­¦ä¹ ç¬”è®°çº¯å¹²è´§<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/devops-guidebook/edit/master/docs/data-base/mongodb/basic-usage.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last update: ">1/21/2021, 02:51:50</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/devops-guidebook/umi.js"></script>
    <script src="/devops-guidebook/docs__data-base__mongodb__basic-usage.md.js"></script>
  </body>
</html>
