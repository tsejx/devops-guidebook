<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/devops-guidebook/umi.css" />
    <script>
      window.routerBase = "/devops-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.9
    </script>
    <title>&#x9759;&#x6001;&#x8D44;&#x6E90;&#x670D;&#x52A1;&#x5668;</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/favicon.png&#x27;)" href="/devops-guidebook//">DevOps Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/devops-guidebook//linux">Linux</a><a aria-current="page" class="active" href="/devops-guidebook//server">æœåŠ¡å™¨</a><a href="/devops-guidebook//data-base">æ•°æ®åº“</a><a href="/devops-guidebook//deploy">éƒ¨ç½²</a><a href="/devops-guidebook//version">ç‰ˆæœ¬ç®¡ç†</a><a href="/devops-guidebook//devops">DevOps</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/devops-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/favicon.png&#x27;)" href="/devops-guidebook//"></a><h1>DevOps Guidebook</h1><p>DevOps å®Œå…¨çŸ¥è¯†ä½“ç³»</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/devops-guidebook//linux">Linux</a></li><li><a aria-current="page" class="active" href="/devops-guidebook//server">æœåŠ¡å™¨</a></li><li><a href="/devops-guidebook//data-base">æ•°æ®åº“</a></li><li><a href="/devops-guidebook//deploy">éƒ¨ç½²</a></li><li><a href="/devops-guidebook//version">ç‰ˆæœ¬ç®¡ç†</a></li><li><a href="/devops-guidebook//devops">DevOps</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/devops-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a aria-current="page" class="active" href="/devops-guidebook//server/nginx">Nginx</a><ul><li><a href="/devops-guidebook//server/nginx/overview"><span>åŸºæœ¬æ¦‚è¦</span></a></li><li><a href="/devops-guidebook//server/nginx/getting-start"><span>å¿«é€Ÿå¼€å§‹</span></a></li><li><a href="/devops-guidebook//server/nginx/configuration"><span>é…ç½®æ–‡ä»¶</span></a></li><li><a href="/devops-guidebook//server/nginx/proxy-service"><span>ä»£ç†æœåŠ¡</span></a></li><li><a aria-current="page" class="active" href="/devops-guidebook//server/nginx/static-resource-server"><span>é™æ€èµ„æºæœåŠ¡å™¨</span></a></li><li><a href="/devops-guidebook//server/nginx/dynamic-cache"><span>åŠ¨æ€ç¼“å­˜</span></a></li><li><a href="/devops-guidebook//server/nginx/load-balance"><span>è´Ÿè½½å‡è¡¡</span></a></li><li><a href="/devops-guidebook//server/nginx/command"><span>å‘½ä»¤è¡Œæ“ä½œ</span></a></li><li><a href="/devops-guidebook//server/nginx/bug-logs"><span>è¸©å‘æ—¥å¿—</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="é™æ€èµ„æº" data-depth="2" class=""><a href="/devops-guidebook//server/nginx/static-resource-server#é™æ€èµ„æº"><span>é™æ€èµ„æº</span></a></li><li title="æ–‡ä»¶è¯»å–é…ç½®" data-depth="2" class=""><a href="/devops-guidebook//server/nginx/static-resource-server#æ–‡ä»¶è¯»å–é…ç½®"><span>æ–‡ä»¶è¯»å–é…ç½®</span></a></li><li title="æµè§ˆå™¨ç¼“å­˜" data-depth="2" class=""><a href="/devops-guidebook//server/nginx/static-resource-server#æµè§ˆå™¨ç¼“å­˜"><span>æµè§ˆå™¨ç¼“å­˜</span></a></li><li title="è·¨åŸŸè®¿é—®" data-depth="2" class=""><a href="/devops-guidebook//server/nginx/static-resource-server#è·¨åŸŸè®¿é—®"><span>è·¨åŸŸè®¿é—®</span></a></li><li title="é˜²ç›—é“¾" data-depth="2" class=""><a href="/devops-guidebook//server/nginx/static-resource-server#é˜²ç›—é“¾"><span>é˜²ç›—é“¾</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="é™æ€èµ„æºæœåŠ¡å™¨"><a aria-hidden="true" href="#é™æ€èµ„æºæœåŠ¡å™¨"><span class="icon icon-link"></span></a>é™æ€èµ„æºæœåŠ¡å™¨</h1><h2 id="é™æ€èµ„æº"><a aria-hidden="true" href="#é™æ€èµ„æº"><span class="icon icon-link"></span></a>é™æ€èµ„æº</h2><ul><li>æµè§ˆå™¨ç«¯æ¸²æŸ“ï¼šHTMLã€CSSã€JS</li><li>å›¾ç‰‡ï¼šJPEGã€GIFã€PNG</li><li>è§†é¢‘ï¼šFLVã€MPEG</li><li>æ–‡ä»¶ï¼šTXT ç­‰ä»»æ„ä¸‹è½½æ–‡ä»¶</li></ul><h2 id="æ–‡ä»¶è¯»å–é…ç½®"><a aria-hidden="true" href="#æ–‡ä»¶è¯»å–é…ç½®"><span class="icon icon-link"></span></a>æ–‡ä»¶è¯»å–é…ç½®</h2><p>ğŸ“– <strong>è¯­æ³•</strong>ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="syntax: sendfile on | off
deafult: sendfile off
context: http,server,location,if in location
" data-status="copy"></button><div class="token-line"><span class="token plain">syntax: sendfile on </span><span class="token operator">|</span><span class="token plain"> off</span></div><div class="token-line"><span class="token plain">deafult: sendfile off</span></div><div class="token-line"><span class="token plain">context: http,server,location,if </span><span class="token keyword">in</span><span class="token plain"> location</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><code>--with-file-aio</code> å¼‚æ­¥æ–‡ä»¶è¯»å–ã€‚</p><p>ğŸ“– <strong>è¯­æ³•</strong>ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="syntax: tcp_nopush on | off
default: tcp_nopush off
context: http, server, location
" data-status="copy"></button><div class="token-line"><span class="token plain">syntax: tcp_nopush on </span><span class="token operator">|</span><span class="token plain"> off</span></div><div class="token-line"><span class="token plain">default: tcp_nopush off</span></div><div class="token-line"><span class="token plain">context: http, server, location</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>sendfile å¼€å¯çš„æƒ…å†µä¸‹ï¼Œæé«˜ç½‘ç»œåŒ…çš„ä¼ è¾“æ•ˆç‡ï¼ˆç­‰å¾…ï¼Œä¸€æ¬¡ä¼ è¾“ï¼‰</p><h2 id="æµè§ˆå™¨ç¼“å­˜"><a aria-hidden="true" href="#æµè§ˆå™¨ç¼“å­˜"><span class="icon icon-link"></span></a>æµè§ˆå™¨ç¼“å­˜</h2><p>æ·»åŠ  <code>cache-control</code> å’Œ <code>expires</code> å¤´ã€‚</p><p>ğŸ“– <strong>è¯­æ³•</strong>ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="syntax: expires [modified] time;
                expires epoch | max | off;
default: expires off;
context: http, server, location
" data-status="copy"></button><div class="token-line"><span class="token plain">syntax: expires </span><span class="token punctuation">[</span><span class="token plain">modified</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token function">time</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">                expires epoch </span><span class="token operator">|</span><span class="token plain"> max </span><span class="token operator">|</span><span class="token plain"> off</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">default: expires off</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">context: http, server, location</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>ğŸŒ° <strong>é…ç½®ç¤ºä¾‹</strong>ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-nginx"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="location ~ .*\.(htm|html)$ {
    #expires 24h;
    root /opt/app/code;
}
" data-status="copy"></button><div class="token-line"><span class="token plain">location ~ .*\.(htm|html)$ {</span></div><div class="token-line"><span class="token plain">    #expires 24h;</span></div><div class="token-line"><span class="token plain">    root /opt/app/code;</span></div><div class="token-line"><span class="token plain">}</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="è·¨åŸŸè®¿é—®"><a aria-hidden="true" href="#è·¨åŸŸè®¿é—®"><span class="icon icon-link"></span></a>è·¨åŸŸè®¿é—®</h2><p>ğŸ“– <strong>è¯­æ³•</strong>ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="syntax: add_header bane value [always]
default: -
context: http, server, location, if in location
" data-status="copy"></button><div class="token-line"><span class="token plain">syntax: add_header bane value </span><span class="token punctuation">[</span><span class="token plain">always</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">default: -</span></div><div class="token-line"><span class="token plain">context: http, server, location, </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> location</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>æ·»åŠ è¯·æ±‚å¤´ï¼šAccess-Control-Allow-Origin</p><div class="__dumi-default-code-block"><pre class="prism-code language-nginx"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="location ~ .*\.(htm|html)$ {
    #add_header Access-Control-Allow-Origin http://www.jesonc.com;
    #add_header Access-Control-Allow-Methods GET,POST,PUT,DELETE,OPTIONS;
    root /opt/app/code;
}
" data-status="copy"></button><div class="token-line"><span class="token plain">location ~ .*\.(htm|html)$ {</span></div><div class="token-line"><span class="token plain">    #add_header Access-Control-Allow-Origin http://www.jesonc.com;</span></div><div class="token-line"><span class="token plain">    #add_header Access-Control-Allow-Methods GET,POST,PUT,DELETE,OPTIONS;</span></div><div class="token-line"><span class="token plain">    root /opt/app/code;</span></div><div class="token-line"><span class="token plain">}</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="é˜²ç›—é“¾"><a aria-hidden="true" href="#é˜²ç›—é“¾"><span class="icon icon-link"></span></a>é˜²ç›—é“¾</h2><p>é˜²ç›—é“¾æœºåˆ¶çš„ç›®çš„æ˜¯é˜²æ­¢æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼ˆä¾‹å¦‚å›¾ç‰‡ã€æ–‡ä»¶ç­‰ï¼‰è¢«å…¶å®ƒç”¨æˆ·é‡‡ç”¨å…¶å®ƒçš„æŠ€æœ¯æ‰‹æ®µæ¥è®¿é—®æˆ–ä¸‹è½½ã€‚</p><p>å®ç°æ–¹å¼ï¼šåŒºåˆ«å“ªäº›è¯·æ±‚æ˜¯éæ­£å¸¸çš„ç”¨æˆ·è¯·æ±‚</p><p>åŸºäº <code>http_refer</code> é˜²ç›—é“¾é…ç½®æ¨¡å—ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-nginx"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="location ~* \.(gif|jpg|png|jpeg)$ {
    # åªå…è®¸ 192.168.0.1 è¯·æ±‚èµ„æº
    valid_referers none blocked 192.168.0.1;
    if ($invalid_referer) {
        rewrite ^/ http://$host/logo.png;
    }
}
" data-status="copy"></button><div class="token-line"><span class="token plain">location ~* \.(gif|jpg|png|jpeg)$ {</span></div><div class="token-line"><span class="token plain">    # åªå…è®¸ 192.168.0.1 è¯·æ±‚èµ„æº</span></div><div class="token-line"><span class="token plain">    valid_referers none blocked 192.168.0.1;</span></div><div class="token-line"><span class="token plain">    if ($invalid_referer) {</span></div><div class="token-line"><span class="token plain">        rewrite ^/ http://$host/logo.png;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">}</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><ul><li>è®¾ç½®é˜²ç›—é“¾æ–‡ä»¶ç±»å‹ï¼Œè‡ªè¡Œä¿®æ”¹ï¼Œæ¯ä¸ªåç¼€ç”¨ <code>|</code> ç¬¦å·åˆ†éš”</li><li>å…è®¸æ–‡ä»¶é“¾å‡ºçš„åŸŸåç™½åå•ï¼Œè‡ªè¡Œä¿®æ”¹æˆå·±æ–¹åŸŸåï¼ŒåŸŸåä¸åŸŸåä¹‹é—´ä½¿ç”¨ç©ºæ ¼éš”å¼€</li></ul><hr/><p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p><ul><li><a href="https://juejin.im/post/5a2600bdf265da432b4aaaba#heading-76" target="_blank" rel="noopener noreferrer">Nginx ä»å…¥é—¨åˆ°å®è·µ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://juejin.im/entry/5d7e4540f265da03b76b50cc" target="_blank" rel="noopener noreferrer">åç«¯å¿…å¤‡ Nginx é…ç½®<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/devops-guidebook/edit/master/docs/server/nginx/static-resource-server.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">7/11/2020, 7:44:42 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/devops-guidebook/umi.js"></script>
    <script src="/devops-guidebook/docs__server__nginx__static-resource-server.md.js"></script>
  </body>
</html>
